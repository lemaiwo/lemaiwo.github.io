{"version":3,"file":"App.controller.js","names":["Controller","_interopRequireDefault","__Controller","App","extend","onInit","_onInit","_this$getView","_this","this","darkMode","getCookieValue","getView","setModel","JSONModel","lightMode","selectedTab","_temp","Promise","resolve","openFragment","name","data","then","_this$openFragment","cookieResult","setCookie","e","reject","onInfo","_onInfo","topic","_this2","_this2$openFragment","closeResult","navigateToSection","_navigateToSection","event","key","getParameter","_event$getParameter","_expandButtonPress","getRouter","navTo","_getRouter","UIComponent","getRouterFor","onSwitchTheme","_onSwitchTheme","_this$getView2","appModel","getModel","ligthMode","getProperty","sap","ui","getCore","applyTheme","setProperty","_setCookie","cookieName","value","expiresDate","date","Date","setTime","getTime","toUTCString","document","cookie","_getCookieValue","cookies","split","_iterator","_createForOfIteratorHelper","_step","s","n","done","trim","indexOf","substring","length","err","f"],"sources":["App.controller.ts"],"sourcesContent":["import { IconTabHeader$SelectEvent } from \"sap/m/IconTabHeader\";\nimport UIComponent from \"sap/ui/core/UIComponent\";\nimport Controller from \"./Base.controller\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\n\n/**\n * @namespace be.wl.lemtech.wouter.controller\n */\nexport default class App extends Controller {\n\n    /*eslint-disable @typescript-eslint/no-empty-function*/\n    public async onInit() {\n        const darkMode = (this.getCookieValue(\"mode\") || \"sap_horizon\") === \"sap_horizon_dark\"?true:false;\n        this.getView()?.setModel(new JSONModel({ lightMode: !darkMode, darkMode: darkMode, selectedTab: \"home\" }), \"app\");\n        \n        if (this.getCookieValue(\"approval_requested\") !== \"1\") {\n            const cookieResult = (await this.openFragment({\n                name: \"be.wl.lemtech.wouter.view.dialog.CookieSettings\",\n                data: {}\n            })) as string;\n            this.setCookie(\"allow_required_cookies\",cookieResult);\n        }\n    }\n\tpublic async onInfo(topic: string) {\n\t\tconst closeResult = (await this.openFragment({\n\t\t\tname: \"be.wl.lemtech.wouter.view.dialog.Info\"\n\t\t})) as string;\n\t}\n    public navigateToSection(event: IconTabHeader$SelectEvent) {\n        const key = event.getParameter(\"key\");\n        if (key === \"help\") {\n            event?.getParameter(\"item\")?._expandButtonPress()\n        } else {\n            this.getRouter().navTo(key!);\n        }\n    }\n    protected getRouter() {\n        return UIComponent.getRouterFor(this);\n    }\n    private onSwitchTheme() {\n        const appModel = (this.getView()?.getModel(\"app\") as JSONModel);\n        let ligthMode = appModel.getProperty(\"/lightMode\");\n        let darkMode = appModel.getProperty(\"/darkMode\");\n\n        if (ligthMode) {\n            ligthMode = false;\n            darkMode = true;\n            sap.ui.getCore().applyTheme(\"sap_horizon_dark\");\n            this.setCookie(\"mode\",\"sap_horizon_dark\");\n        } else {\n            ligthMode = true;\n            darkMode = false;\n            sap.ui.getCore().applyTheme(\"sap_horizon\");\n            this.setCookie(\"mode\",\"sap_horizon\");\n        }\n        appModel.setProperty(\"/lightMode\", ligthMode);\n        appModel.setProperty(\"/darkMode\", darkMode);\n    }\n    public setCookie(cookieName: string, value: string) {\n        let expiresDate,\n            date = new Date();\n\n        date.setTime(date.getTime() + (356 * 24 * 60 * 60 * 1000)); // one year\n        expiresDate = \"expires=\" + date.toUTCString();\n\n        document.cookie = cookieName + \"=\" + value + \";\" + expiresDate + \";path=/\";\n    }\n    private getCookieValue(cookieName: string) {\n        const cookies = document.cookie.split(\";\");\n\n        // eslint-disable-next-line no-param-reassign\n        cookieName = cookieName + \"=\";\n        for (let cookie of cookies) {\n            cookie = cookie.trim();\n            if (cookie.indexOf(cookieName) === 0) {\n                return cookie.substring(cookieName.length, cookie.length);\n            }\n        }\n        return false;\n    }\n}"],"mappings":"8wCAEOA,EAAUC,EAAAC,GAGjB,IAGqBC,EAAYH,EAAUI,OAAA,uCAG1BC,OAAM,SAAAC,IAAA,IAAG,IAAAC,EAAA,IAAAC,EACAC,KAAlB,IAAMC,GAAYF,EAAKG,eAAe,SAAW,iBAAmB,mBAAmB,KAAK,OAC5FJ,EAAAC,EAAKI,aAAS,MAAAL,SAAA,GAAdA,EAAgBM,SAAS,IAAIC,EAAU,CAAEC,WAAYL,EAAUA,SAAUA,EAAUM,YAAa,SAAW,OAAO,IAAAC,EAAA,cAE9GT,EAAKG,eAAe,wBAA0B,IAAG,QAAAO,QAAAC,QACrBX,EAAKY,aAAa,CAC1CC,KAAM,kDACNC,KAAM,CAAC,KACTC,KAAA,SAAAC,GAHF,IAAMC,EAAYD,EAIlBhB,EAAKkB,UAAU,yBAAyBD,EAAc,IAPwD,GAOxD,OAAAP,QAAAC,QAAAF,KAAAM,KAAAN,EAAAM,KAAA,qBAE9D,CAAC,MAAAI,GAAA,OAAAT,QAAAU,OAAAD,EAAA,GACSE,OAAM,SAAAC,EAACC,GAAa,IAAE,IAAAC,EACPvB,KAAI,OAAAS,QAAAC,QAAJa,EAAKZ,aAAa,CAC5CC,KAAM,2CACLE,KAAA,SAAAU,GAFF,IAAMC,EAAWD,CAEH,EACf,CAAC,MAAAN,GAAA,OAAAT,QAAAU,OAAAD,EAAA,GACSQ,kBAAiB,SAAAC,EAACC,GACrB,IAAMC,EAAMD,EAAME,aAAa,OAC/B,GAAID,IAAQ,OAAQ,KAAAE,EAChBH,IAAK,MAALA,SAAK,IAAAG,EAALH,EAAOE,aAAa,WAAO,MAAAC,SAAA,GAA3BA,EAA6BC,oBACjC,KAAO,CACHhC,KAAKiC,YAAYC,MAAML,EAC3B,CACJ,EACUI,UAAS,SAAAE,IACf,OAAOC,EAAYC,aAAarC,KACpC,EACQsC,cAAa,SAAAC,IAAG,IAAAC,EACpB,IAAMC,GAAQD,EAAIxC,KAAKG,aAAS,MAAAqC,SAAA,SAAdA,EAAgBE,SAAS,OAC3C,IAAIC,EAAYF,EAASG,YAAY,cACrC,IAAI3C,EAAWwC,EAASG,YAAY,aAEpC,GAAID,EAAW,CACXA,EAAY,MACZ1C,EAAW,KACX4C,IAAIC,GAAGC,UAAUC,WAAW,oBAC5BhD,KAAKiB,UAAU,OAAO,mBAC1B,KAAO,CACH0B,EAAY,KACZ1C,EAAW,MACX4C,IAAIC,GAAGC,UAAUC,WAAW,eAC5BhD,KAAKiB,UAAU,OAAO,cAC1B,CACAwB,EAASQ,YAAY,aAAcN,GACnCF,EAASQ,YAAY,YAAahD,EACtC,EACOgB,UAAS,SAAAiC,EAACC,EAAoBC,GACjC,IAAIC,EACAC,EAAO,IAAIC,KAEfD,EAAKE,QAAQF,EAAKG,UAAa,IAAM,GAAK,GAAK,GAAK,KACpDJ,EAAc,WAAaC,EAAKI,cAEhCC,SAASC,OAAST,EAAa,IAAMC,EAAQ,IAAMC,EAAc,SACrE,EACQnD,eAAc,SAAA2D,EAACV,GACnB,IAAMW,EAAUH,SAASC,OAAOG,MAAM,KAGtCZ,EAAaA,EAAa,IAAI,IAAAa,EAAAC,EACXH,GAAOI,EAAA,IAA1B,IAAAF,EAAAG,MAAAD,EAAAF,EAAAI,KAAAC,MAA4B,KAAnBT,EAAMM,EAAAd,MACXQ,EAASA,EAAOU,OAChB,GAAIV,EAAOW,QAAQpB,KAAgB,EAAG,CAClC,OAAOS,EAAOY,UAAUrB,EAAWsB,OAAQb,EAAOa,OACtD,CACJ,CAAC,OAAAC,GAAAV,EAAA9C,EAAAwD,EAAA,SAAAV,EAAAW,GAAA,CACD,OAAO,KACX,IAAC,OAvEgBjF,CAAG"}